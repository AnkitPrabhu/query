[
    {
        "testcase": "Combination of USE INDEX and USE HASH hints, Hash Join build outer. Explain",
        "ignore": "index_id",
        "explain": {
            "disabled": false,
            "results": [
                {
                    "present": true
                }
            ],
            "statement": "SELECT true AS present FROM $explan AS p WHERE ANY v WITHIN p.plan.`~children` SATISFIES v.`#operator` = 'HashJoin' END"
        },
        "statements":"SELECT c.firstName, c.lastName, c.customerId, p.purchaseId FROM customer c USE INDEX (cust_lastName_firstName_customerId) JOIN purchase p USE INDEX (purch_customerId_purchaseId) HASH(probe) ON c.customerId = p.customerId WHERE c.lastName = \"Champlin\" ORDER BY p.purchaseId LIMIT 10",
        "ordered": true,
        "results": [
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase104"
        },
        {
            "customerId": "customer33",
            "firstName": "Charles",
            "lastName": "Champlin",
            "purchaseId": "purchase1582"
        },
        {
            "customerId": "customer33",
            "firstName": "Charles",
            "lastName": "Champlin",
            "purchaseId": "purchase1704"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase1747"
        },
        {
            "customerId": "customer631",
            "firstName": "Gladyce",
            "lastName": "Champlin",
            "purchaseId": "purchase2838"
        },
        {
            "customerId": "customer631",
            "firstName": "Gladyce",
            "lastName": "Champlin",
            "purchaseId": "purchase2872"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase3344"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase3698"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase4142"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase4315"
        }
    ]
    },
    {
        "testcase": "USE HASH hints on first keyspace, error",
        "statements":"SELECT c.firstName, c.lastName, c.customerId, p.purchaseId FROM customer c USE HASH(build) JOIN purchase p USE INDEX (purch_customerId_purchaseId, purch_purchaseId) ON c.customerId = p.customerId WHERE c.lastName = \"Champlin\" AND c.type = \"customer\" ORDER BY p.purchaseId LIMIT 10",
        "error": "Join hint (USE HASH or USE NL) cannot be specified on the first keyspace c - at JOIN"
    },
    {
        "testcase": "Combination of USE INDEX and USE HASH hints, ON-clause has OR clause, USE HASH hint igored. Explain",
        "ignore": "index_id",
        "explain": {
            "disabled": false,
            "results": [
                {
                    "present": true
                }
            ],
            "statement": "SELECT true AS present FROM $explan AS p WHERE ANY v WITHIN p.plan.`~children` SATISFIES v.`#operator` = 'NestedLoopJoin' END"
        },
        "statements":"SELECT c.firstName, c.lastName, c.customerId, p.purchaseId FROM customer c JOIN purchase p USE HASH(probe) INDEX (purch_customerId_purchaseId, purch_purchaseId) ON p.customerId = c.customerId OR p.purchaseId = \"purchase8992\" WHERE c.lastName = \"Champlin\" ORDER BY p.purchaseId LIMIT 10 OFFSET 10",
        "ordered": true,
        "results": [
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase436"
        },
        {
            "customerId": "customer33",
            "firstName": "Charles",
            "lastName": "Champlin",
            "purchaseId": "purchase4534"
        },
        {
            "customerId": "customer631",
            "firstName": "Gladyce",
            "lastName": "Champlin",
            "purchaseId": "purchase4627"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase5193"
        },
        {
            "customerId": "customer631",
            "firstName": "Gladyce",
            "lastName": "Champlin",
            "purchaseId": "purchase5610"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase5889"
        },
        {
            "customerId": "customer33",
            "firstName": "Charles",
            "lastName": "Champlin",
            "purchaseId": "purchase5988"
        },
        {
            "customerId": "customer60",
            "firstName": "Bryon",
            "lastName": "Champlin",
            "purchaseId": "purchase6084"
        },
        {
            "customerId": "customer631",
            "firstName": "Gladyce",
            "lastName": "Champlin",
            "purchaseId": "purchase6530"
        },
        {
            "customerId": "customer33",
            "firstName": "Charles",
            "lastName": "Champlin",
            "purchaseId": "purchase6985"
        }
    ]
    }
]

